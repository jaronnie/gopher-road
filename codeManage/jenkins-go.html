<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jenkins部署go程序(自动编译部署) | gopher-road</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="favicon-gopher-road.ico">
    <meta name="description" content="golang 后端之路">
    
    <link rel="preload" href="/assets/css/0.styles.b409fe9c.css" as="style"><link rel="preload" href="/assets/js/app.75839583.js" as="script"><link rel="preload" href="/assets/js/3.c330897b.js" as="script"><link rel="preload" href="/assets/js/17.861e10ef.js" as="script"><link rel="prefetch" href="/assets/js/10.574c6d18.js"><link rel="prefetch" href="/assets/js/11.07648960.js"><link rel="prefetch" href="/assets/js/12.a5a5b1c1.js"><link rel="prefetch" href="/assets/js/13.8f3bbbd8.js"><link rel="prefetch" href="/assets/js/14.dabcf8f2.js"><link rel="prefetch" href="/assets/js/15.321256a8.js"><link rel="prefetch" href="/assets/js/16.fb574f0c.js"><link rel="prefetch" href="/assets/js/18.487ad778.js"><link rel="prefetch" href="/assets/js/19.ab73fcf3.js"><link rel="prefetch" href="/assets/js/20.c0f6bd3c.js"><link rel="prefetch" href="/assets/js/21.7eac46fb.js"><link rel="prefetch" href="/assets/js/22.c206d07c.js"><link rel="prefetch" href="/assets/js/23.9ff69559.js"><link rel="prefetch" href="/assets/js/24.194989b6.js"><link rel="prefetch" href="/assets/js/25.d443a0e6.js"><link rel="prefetch" href="/assets/js/26.5123a63f.js"><link rel="prefetch" href="/assets/js/27.c01f7a6c.js"><link rel="prefetch" href="/assets/js/28.e2331290.js"><link rel="prefetch" href="/assets/js/29.d5a362b0.js"><link rel="prefetch" href="/assets/js/30.28ae1db4.js"><link rel="prefetch" href="/assets/js/31.60f9d080.js"><link rel="prefetch" href="/assets/js/32.259fd063.js"><link rel="prefetch" href="/assets/js/33.007a8134.js"><link rel="prefetch" href="/assets/js/34.e34c4811.js"><link rel="prefetch" href="/assets/js/35.cde0744f.js"><link rel="prefetch" href="/assets/js/36.de6768b8.js"><link rel="prefetch" href="/assets/js/37.92ca611f.js"><link rel="prefetch" href="/assets/js/38.f7c197ef.js"><link rel="prefetch" href="/assets/js/39.3b32d6c7.js"><link rel="prefetch" href="/assets/js/4.5177acf6.js"><link rel="prefetch" href="/assets/js/40.5fc9e8aa.js"><link rel="prefetch" href="/assets/js/41.317b4d03.js"><link rel="prefetch" href="/assets/js/42.3d1bf267.js"><link rel="prefetch" href="/assets/js/43.c3683219.js"><link rel="prefetch" href="/assets/js/44.c9a52329.js"><link rel="prefetch" href="/assets/js/45.82c29736.js"><link rel="prefetch" href="/assets/js/46.2191f942.js"><link rel="prefetch" href="/assets/js/47.6a3eed3a.js"><link rel="prefetch" href="/assets/js/48.807ec067.js"><link rel="prefetch" href="/assets/js/49.f74d784e.js"><link rel="prefetch" href="/assets/js/5.61691f5d.js"><link rel="prefetch" href="/assets/js/50.3eb185be.js"><link rel="prefetch" href="/assets/js/51.fa599a53.js"><link rel="prefetch" href="/assets/js/52.c21a91bf.js"><link rel="prefetch" href="/assets/js/53.6be32752.js"><link rel="prefetch" href="/assets/js/54.a7f9332e.js"><link rel="prefetch" href="/assets/js/55.09185dfc.js"><link rel="prefetch" href="/assets/js/56.eb1e0e94.js"><link rel="prefetch" href="/assets/js/57.0fcdc4b8.js"><link rel="prefetch" href="/assets/js/58.e2e685c4.js"><link rel="prefetch" href="/assets/js/59.40494b00.js"><link rel="prefetch" href="/assets/js/6.0bcdc536.js"><link rel="prefetch" href="/assets/js/60.051741b9.js"><link rel="prefetch" href="/assets/js/61.1e56a420.js"><link rel="prefetch" href="/assets/js/62.36267cc7.js"><link rel="prefetch" href="/assets/js/63.3cb27b6a.js"><link rel="prefetch" href="/assets/js/64.a1a4a623.js"><link rel="prefetch" href="/assets/js/65.380d4fb7.js"><link rel="prefetch" href="/assets/js/66.02a2a7c5.js"><link rel="prefetch" href="/assets/js/67.b57ee273.js"><link rel="prefetch" href="/assets/js/68.b074d9f9.js"><link rel="prefetch" href="/assets/js/69.ccc0fdbe.js"><link rel="prefetch" href="/assets/js/7.6c2ef2c0.js"><link rel="prefetch" href="/assets/js/70.4588120c.js"><link rel="prefetch" href="/assets/js/71.a271dfa6.js"><link rel="prefetch" href="/assets/js/72.0abe001d.js"><link rel="prefetch" href="/assets/js/73.ca72e846.js"><link rel="prefetch" href="/assets/js/74.c822ec50.js"><link rel="prefetch" href="/assets/js/75.f913d6cb.js"><link rel="prefetch" href="/assets/js/76.8b8f09fa.js"><link rel="prefetch" href="/assets/js/77.b7df23a8.js"><link rel="prefetch" href="/assets/js/8.dd79b5e8.js"><link rel="prefetch" href="/assets/js/9.2f675ba5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c8693219.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b409fe9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://oss.jaronnie.com/logo.jpeg" alt="gopher-road" class="logo"> <span class="site-name can-hide">gopher-road</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/golang/" class="nav-link">
  golang
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  linux
</a></div><div class="nav-item"><a href="/algorithms/" class="nav-link">
  算法与数据结构
</a></div><div class="nav-item"><a href="/codeManage/" class="nav-link router-link-active">
  代码管理
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><a href="/docker/" class="nav-link">
  docker
</a></div><div class="nav-item"><a href="/kubernetes/" class="nav-link">
  kubernetes
</a></div><div class="nav-item"><a href="/project/" class="nav-link">
  项目实战
</a></div><div class="nav-item"><a href="/recommendation/" class="nav-link">
  推荐阅读
</a></div><div class="nav-item"><a href="https://github.com/jaronnie/gopher-road" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.jaronnie.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/golang/" class="nav-link">
  golang
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  linux
</a></div><div class="nav-item"><a href="/algorithms/" class="nav-link">
  算法与数据结构
</a></div><div class="nav-item"><a href="/codeManage/" class="nav-link router-link-active">
  代码管理
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><a href="/docker/" class="nav-link">
  docker
</a></div><div class="nav-item"><a href="/kubernetes/" class="nav-link">
  kubernetes
</a></div><div class="nav-item"><a href="/project/" class="nav-link">
  项目实战
</a></div><div class="nav-item"><a href="/recommendation/" class="nav-link">
  推荐阅读
</a></div><div class="nav-item"><a href="https://github.com/jaronnie/gopher-road" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.jaronnie.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/codeManage/gomodule.html" class="sidebar-link">实战 go module 使用</a></li><li><a href="/codeManage/git-workflow.html" class="sidebar-link">项目开发流程</a></li><li><a href="/codeManage/git-use.html" class="sidebar-link">git-use</a></li><li><a href="/codeManage/jenkins-go.html" aria-current="page" class="active sidebar-link">jenkins部署go程序(自动编译部署)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/codeManage/jenkins-go.html#什么是jenkins" class="sidebar-link">什么是jenkins?</a></li><li class="sidebar-sub-header"><a href="/codeManage/jenkins-go.html#安装jenkins" class="sidebar-link">安装jenkins</a></li><li class="sidebar-sub-header"><a href="/codeManage/jenkins-go.html#启动jenkins" class="sidebar-link">启动jenkins</a></li><li class="sidebar-sub-header"><a href="/codeManage/jenkins-go.html#jenkins配置文件" class="sidebar-link">jenkins配置文件</a></li><li class="sidebar-sub-header"><a href="/codeManage/jenkins-go.html#使用jenkins部署一个任务-定时构建" class="sidebar-link">使用jenkins部署一个任务(定时构建)</a></li></ul></li><li><a href="/codeManage/git-lfs.html" class="sidebar-link">git lfs</a></li><li><a href="/codeManage/github-action.html" class="sidebar-link">github action build CI/CD</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jenkins部署go程序-自动编译部署"><a href="#jenkins部署go程序-自动编译部署" class="header-anchor">#</a> jenkins部署go程序(自动编译部署)</h1> <h2 id="什么是jenkins"><a href="#什么是jenkins" class="header-anchor">#</a> 什么是jenkins?</h2> <p>【官方介绍】</p> <p>Jenkins是一款开源 CI&amp;CD 软件，用于自动化各种任务，包括构建、测试和部署软件。</p> <p>【白话说jenkins】</p> <p>jenkins可以自动化的编译，测试以及部署代码。当代码发生变化时，只需要点一个按钮就可以自动化的重新编译程序发步程序，你甚至还可以设置定时检测代码是否发生变化。比如你把代码放在了github上，jenkins可以绑定你的github仓库，当你的Github有新的提交时，jenkins可以自动检测到变化，重新拉取仓库，通过你写的脚本进行重新编译，再重新部署。省去了很多的人力。</p> <h2 id="安装jenkins"><a href="#安装jenkins" class="header-anchor">#</a> 安装jenkins</h2> <p>使用清华镜像下载</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/jenkins/war/2.263/jenkins.war
</code></pre></div><p>为了解决启动慢的问题</p> <p>修改~/.jenkins/hudson.model.UpdateCenter.xml为如下</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version='1.1' encoding='UTF-8'?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sites</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>site</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://mirror.xmission.com/jenkins/updates/update-center.json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>site</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sites</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="启动jenkins"><a href="#启动jenkins" class="header-anchor">#</a> 启动jenkins</h2> <p><code>java -jar jenkins.war --httpPort=8080</code></p> <p>通过 ip:8080访问 jenkins</p> <p>选择社区推荐安装那一选项</p> <h2 id="jenkins配置文件"><a href="#jenkins配置文件" class="header-anchor">#</a> jenkins配置文件</h2> <p>所有的配置文件以及插件都在$HOME/.jenkins</p> <p>不得不说这个项目做的是真的好</p> <p>很优美，一个war包搞定！</p> <h2 id="使用jenkins部署一个任务-定时构建"><a href="#使用jenkins部署一个任务-定时构建" class="header-anchor">#</a> 使用jenkins部署一个任务(定时构建)</h2> <h3 id="首先创建一个仓库"><a href="#首先创建一个仓库" class="header-anchor">#</a> 首先创建一个仓库</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> jenkins-go-first
<span class="token builtin class-name">cd</span> jenkins-go-first
<span class="token function">git</span> init
</code></pre></div><p>写一个最简单web程序(hello.go)</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>
                    <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:9000&quot;</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 提交到本地仓库</span>
<span class="token function">git</span> <span class="token function">add</span> hello.go
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;add hello.go&quot;</span>
<span class="token function">git</span> branch <span class="token parameter variable">-M</span> main
</code></pre></div><p>在github上建立一个仓库jenkins-go-first</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> remote <span class="token function">add</span> origin git@github.com:gocloudcoder/jenkins-go-first.git
<span class="token comment"># 提交到远程仓库</span>
<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin main
</code></pre></div><h3 id="jenkins中构建任务"><a href="#jenkins中构建任务" class="header-anchor">#</a> jenkins中构建任务</h3> <p>第一步 新建 item</p> <p><img src="http://oss.jaronnie.com/image-20210119202716239.png" alt="image-20210119202716239"></p> <p>写入jenkins-go-first，选择 freestyle project 点击确定</p> <p><img src="http://oss.jaronnie.com/image-20210119202826071.png" alt="image-20210119202826071"></p> <p>选择源码管理，使用git</p> <p>填写github账号和密码</p> <p><img src="http://oss.jaronnie.com/image-20210119203114039.png" alt="image-20210119203114039"></p> <p>制定分支看你远程仓库的主分支是master还是main</p> <p>我这里是用main作为主分支，所以制定分支填写*/main</p> <p><img src="http://oss.jaronnie.com/image-20210119203226354.png" alt="image-20210119203226354"></p> <p>选择源码管理，增加构建步骤选择执行Shell</p> <p><img src="http://oss.jaronnie.com/image-20210119203353292.png" alt="image-20210119203353292"></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># shell中写入</span>
go build <span class="token parameter variable">-o</span> hello
<span class="token assign-left variable">BUILD_ID</span><span class="token operator">=</span>DONTKILLME
<span class="token function">nohup</span> ./hello <span class="token operator">&amp;&gt;</span>hello.log <span class="token operator">&amp;</span>
</code></pre></div><p><img src="http://oss.jaronnie.com/image-20210119203545809.png" alt="image-20210119203545809"></p> <p>点击保存</p> <p>立即构建</p> <p><img src="http://oss.jaronnie.com/image-20210119203642498.png" alt="image-20210119203642498"></p> <p>点击箭头处</p> <p><img src="http://oss.jaronnie.com/image-20210119203724869.png" alt="image-20210119203724869"></p> <p>点击控制台输出</p> <p><img src="http://oss.jaronnie.com/image-20210119203759284.png" alt="image-20210119203759284"></p> <p>构建成功</p> <p><img src="http://oss.jaronnie.com/image-20210119203917582.png" alt="image-20210119203917582"></p> <p>直接访问</p> <p>ip:9000/ping</p> <p>在 $HOME/.jenkins/workspace/jenkins-go-first目录下</p> <p>你会看到所有从Github上拉取得代码</p> <p>以及自动编译好的hello二进制文件</p> <p>为了能够实现自动化部署还需要配置Github，在每次提交代码之后，jenkins能够自动触发拉取Github上的代码以及重新编译部署。但是当重新部署的时候，由于端口被占用，所以还需要一个Shell脚本自动杀死该进程。</p> <h3 id="编写shell-deploy-sh"><a href="#编写shell-deploy-sh" class="header-anchor">#</a> 编写shell(deploy.sh)</h3> <blockquote><p>我使用的是root用户</p> <p>如果不是root用户，需要使用sudo</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">lsof</span> <span class="token parameter variable">-i:9000</span> <span class="token parameter variable">-t</span><span class="token variable">)</span></span>
go build <span class="token parameter variable">-o</span> hello
<span class="token assign-left variable">BUILD_ID</span><span class="token operator">=</span>DONTKILLME
<span class="token function">nohup</span> ./hello <span class="token operator">&amp;&gt;</span>hello.log <span class="token operator">&amp;</span>
</code></pre></div><p>将deploy.sh推动到Github远程仓库中</p> <p>将jenkins中的执行shell那一部分改为</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bash</span> ./deploy.sh
</code></pre></div><p>这样的话离自动化部署就更近了一步</p> <p>但是每次还是需要手动去点击构建</p> <h3 id="配置github-每次检测到push就自动构建"><a href="#配置github-每次检测到push就自动构建" class="header-anchor">#</a> 配置Github，每次检测到push就自动构建</h3> <p>安装Github plugin(如果一开始你选择的是安装推荐插件，这个默认是安装的)</p> <h4 id="配置jenkies的webhook接收地址"><a href="#配置jenkies的webhook接收地址" class="header-anchor">#</a> 配置jenkies的Webhook接收地址</h4> <p>系统设置中的Github高级设置中</p> <p>记录好webhook的地址</p> <p>http://nj-jay.com:8080/github-webhook/</p> <p><img src="http://oss.jaronnie.com/image-20210119234032454.png" alt=""></p> <h3 id="配置github项目仓库"><a href="#配置github项目仓库" class="header-anchor">#</a> 配置Github项目仓库</h3> <p>settings -&gt;webhooks-&gt;Add webhooks</p> <p>填写在jenkins中的webhook地址</p> <p>然后Add webhooks即可</p> <p><img src="http://oss.jaronnie.com/image-20210119234345968.png" alt="image-20210119234345968"></p> <h3 id="生成personal-access-tokens"><a href="#生成personal-access-tokens" class="header-anchor">#</a> 生成Personal access tokens</h3> <p>Jenkins访问GitHub工程的时候，有的操作是需要授权的，所以我们要在GitHub上生成授权的token给Jenkins使用，这就是Personal access tokens，生成步骤如下:</p> <p>登录GitHub，进入&quot;Settings&quot;页面，点击左下角的&quot;Developer settings&quot;，如下图：</p> <p><img src="http://oss.jaronnie.com/image-20210119234542585.png" alt="image-20210119234542585"></p> <p><img src="http://oss.jaronnie.com/image-20210119234609198.png" alt="image-20210119234609198"></p> <p>如果怕出问题，所有的选项全部勾选上</p> <h3 id="jenkins配置"><a href="#jenkins配置" class="header-anchor">#</a> jenkins配置</h3> <p>GitHub Plugin插件，在&quot;系统管理-&gt;管理插件&quot;位置检查此插件是否已经安装，没有的话请先安装；
配置GitHub，点击“系统管理-&gt;系统设置”，如下图：</p> <p><img src="https://img-blog.csdnimg.cn/20191112153416973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lUc2h1,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>弹出的页面中，“Kind&quot;选择&quot;Secret text”，&quot;Secret&quot;填入前面在GitHub上生成的Personal access tokens，Description随便写一些描述信息，如下图：</p> <p><img src="http://oss.jaronnie.com/image-20210119235016727.png" alt="image-20210119235016727"></p> <p>填写完毕后，点击右侧的&quot;Test connection&quot;按钮，如果信息没有填错，显示的内容如下图所示：</p> <p><img src="http://oss.jaronnie.com/image-20210119234942760.png" alt="image-20210119234942760"></p> <p>最后点击保存即可</p> <h3 id="项目构建"><a href="#项目构建" class="header-anchor">#</a> 项目构建</h3> <p>在上面的基础上增加几个配置即可</p> <p><img src="http://oss.jaronnie.com/image-20210119235214118.png" alt="image-20210119235214118"></p> <p><img src="http://oss.jaronnie.com/image-20210119235229294.png" alt="image-20210119235229294"></p> <p><img src="http://oss.jaronnie.com/image-20210119235250730.png" alt="image-20210119235250730"></p> <p>然后再push就会自动的检测。重新编译部署！</p> <p>有个小坑，由于我的机子有点垃圾，所以push两分钟后才自动检测到，不是配置的原因!</p> <p><img src="http://oss.jaronnie.com/image-20210120090405451.png" alt="image-20210120090405451"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jaronnie/gopher-road/edit/main/docs/codeManage/jenkins-go.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/18/2023, 9:00:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/codeManage/git-use.html" class="prev">
        git-use
      </a></span> <span class="next"><a href="/codeManage/git-lfs.html">
        git lfs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.75839583.js" defer></script><script src="/assets/js/3.c330897b.js" defer></script><script src="/assets/js/17.861e10ef.js" defer></script>
  </body>
</html>
