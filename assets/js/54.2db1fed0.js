(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{337:function(t,a,_){"use strict";_.r(a);var s=_(10),v=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"为什么剪切比复制快"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么剪切比复制快"}},[t._v("#")]),t._v(" 为什么剪切比复制快")]),t._v(" "),a("blockquote",[a("p",[t._v("本文基于linux环境进行介绍")])]),t._v(" "),a("p",[t._v("回答这个问题之前，首选要明白几个概念")]),t._v(" "),a("ul",[a("li",[t._v("文件是怎么存储的")]),t._v(" "),a("li",[t._v("文件节点（inode），文件信息的保存（文件名，大小，创建时间，修改时间等信息）")])]),t._v(" "),a("h2",{attrs:{id:"文件是怎么存储的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件是怎么存储的"}},[t._v("#")]),t._v(" 文件是怎么存储的")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190525165726246.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x1Y2t5NTI1Mjk=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),a("p",[t._v("文件存储在硬盘上，硬盘的最小存储单位叫做扇区（sector）。每个扇区存放 512 字节即 0.5 Kb.")]),t._v(" "),a("p",[t._v("操作系统在读取硬盘的时候，会一次性连续读取多个扇区以提高效率。一般是连续读取 8 个扇区，即一次性读取一个块（block）。")]),t._v(" "),a("p",[t._v("文件都存储在块中")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/2019052517424155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2x1Y2t5NTI1Mjk=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),a("p",[t._v("那么还需要一个 inode 来记录文件的相关信息。")]),t._v(" "),a("h2",{attrs:{id:"inode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inode"}},[t._v("#")]),t._v(" inode")]),t._v(" "),a("h3",{attrs:{id:"使用stat命令查看inode保存的信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用stat命令查看inode保存的信息"}},[t._v("#")]),t._v(" 使用stat命令查看inode保存的信息")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stat")]),t._v(" hello.txt\n")])])]),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210112111158651.png",alt:"image-20210112111158651"}})]),t._v(" "),a("p",[t._v("核心信息")]),t._v(" "),a("ul",[a("li",[t._v("文件名，文件字节数")]),t._v(" "),a("li",[t._v("文件拥有者，所属组")]),t._v(" "),a("li",[t._v("文件的读写可执行权限")]),t._v(" "),a("li",[t._v("Inode号码")]),t._v(" "),a("li",[t._v("文件创建时间修改时间等")])]),t._v(" "),a("p",[t._v("在linux下，使用的是inode去识别文件的唯一性")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210112111908034.png",alt:"image-20210112111908034"}})]),t._v(" "),a("p",[t._v("可以看到 hello.txt 是 1056459，world.txt inode 是 1056554.")]),t._v(" "),a("p",[t._v("对于系统而言，文件名只是 inode 号码便于识别的一个绰号，类似于 ip 与域名的关系")]),t._v(" "),a("h3",{attrs:{id:"用户通过文件名打开文件的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户通过文件名打开文件的过程"}},[t._v("#")]),t._v(" 用户通过文件名打开文件的过程")]),t._v(" "),a("ul",[a("li",[t._v("系统找到这个文件名对应的 inode 号码")]),t._v(" "),a("li",[t._v("通过 inode 号码，获取 inode 信息")]),t._v(" "),a("li",[t._v("根据 inode 信息，找到文件数据所在的块，进而读取数据")])]),t._v(" "),a("h2",{attrs:{id:"从操作系统层面看剪切与复制的差别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从操作系统层面看剪切与复制的差别"}},[t._v("#")]),t._v(" 从操作系统层面看剪切与复制的差别")]),t._v(" "),a("blockquote",[a("p",[t._v("注：")]),t._v(" "),a("p",[t._v("源文件放在 source 文件夹")]),t._v(" "),a("p",[t._v("剪切和复制的文件放在 dest 文件夹中")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210112112938569.png",alt:"image-20210112112938569"}})]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("文件名")]),t._v(" "),a("th",[t._v("inode")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("hello.txt")]),t._v(" "),a("td",[t._v("1056459")])]),t._v(" "),a("tr",[a("td",[t._v("world.txt")]),t._v(" "),a("td",[t._v("1056554")])])])]),t._v(" "),a("p",[a("strong",[t._v("对hello.txt进行复制操作")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210112121144328.png",alt:"image-20210112121144328"}})]),t._v(" "),a("p",[a("strong",[t._v("对world.txt进行剪切操作")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210112121301169.png",alt:"image-20210112121301169"}})]),t._v(" "),a("p",[t._v("操作之后的 inode")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("filename")]),t._v(" "),a("th",[t._v("inode")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("dest/hello.txt")]),t._v(" "),a("td",[t._v("1056551")])]),t._v(" "),a("tr",[a("td",[t._v("dest/world.txt")]),t._v(" "),a("td",[t._v("1056554")])])])]),t._v(" "),a("p",[t._v("发现了区别，对文件进行剪切之后文件的 inode 是没有变化的")]),t._v(" "),a("p",[t._v("即在硬盘下的块是同一块区间")]),t._v(" "),a("p",[t._v("类似于指针的应用吧")]),t._v(" "),a("p",[t._v("然而复制之后 inode 的值是不一样的")]),t._v(" "),a("p",[t._v("相当于重新在硬盘上开辟了一个区间去存储")]),t._v(" "),a("p",[t._v("肯定是很慢的，尤其是当文件特别大的时候")]),t._v(" "),a("p",[t._v("【注】从 inode 层面可以更好的去理解硬链接和软链接。有兴趣的可以自己去探究探究！")])])}),[],!1,null,null,null);a.default=v.exports}}]);