(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{308:function(s,a,t){"use strict";t.r(a);var e=t(10),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker实战一-用docker构建可ssh登录的ubuntu等容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker实战一-用docker构建可ssh登录的ubuntu等容器"}},[s._v("#")]),s._v(" docker实战一：用docker构建可ssh登录的ubuntu等容器")]),s._v(" "),a("p",[s._v("适用场景：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("可用于教学。假如你是一个linux老师，为了更好更方便的进行讲课，你需要保证你的每个学生都有linux使用。你可以使用docker搭建多个可ssh登录的容器给学生使用。")])]),s._v(" "),a("li",[a("p",[s._v("个人使用。在debian发行版上需要使用其他发行版特有的功能，如kail。可以使用docker运行一个可ssh登录的kail容器，而并不需要先登录到Docker宿主机，再使用docker命令行工具进入到kail容器使用。")])])]),s._v(" "),a("h2",{attrs:{id:"拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[s._v("#")]),s._v(" 拉取镜像")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull ubuntu:latest\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# latest为版本号，latest为最新版，也可将latest换成18.04 20.04等")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210311235804784.png",alt:"image-20210311235804784"}})]),s._v(" "),a("h2",{attrs:{id:"创建容器并后台运行-映射端口1234"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建容器并后台运行-映射端口1234"}},[s._v("#")]),s._v(" 创建容器并后台运行，映射端口1234")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myubuntu "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v(":22 ubuntu\n")])])]),a("p",[s._v("即后台运行一个有交互的tty终端，这样我们登录进去之后直接进入终端。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210312130710318.png",alt:"image-20210312130710318"}})]),s._v(" "),a("h2",{attrs:{id:"进入容器-下载ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器-下载ssh"}},[s._v("#")]),s._v(" 进入容器，下载ssh")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" myubuntu /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" upgrade\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n")])])]),a("h2",{attrs:{id:"修改配置文件以及配置登录密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件以及配置登录密码"}},[s._v("#")]),s._v(" 修改配置文件以及配置登录密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PermitRootLogin yes"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/ssh/sshd_config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置密码 假设为123456")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" restart "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启ssh服务")]),s._v("\n")])])]),a("h2",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),a("p",[s._v("由于我使用服务器，如果你是在本地安装的docker，请使用localhost")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v(" root@localhost\n")])])]),a("p",[a("img",{attrs:{src:"http://oss.jaronnie.com/image-20210312132108337.png",alt:"image-20210312132108337"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);